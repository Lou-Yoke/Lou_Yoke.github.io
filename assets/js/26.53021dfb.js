(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{507:function(e,a,r){"use strict";r.r(a);var n=r(4),t=Object(n.a)({},(function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"mybatis逆向工程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mybatis逆向工程"}},[e._v("#")]),e._v(" MyBatis逆向工程")]),e._v(" "),r("h2",{attrs:{id:"什么是逆向工程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是逆向工程"}},[e._v("#")]),e._v(" 什么是逆向工程")]),e._v(" "),r("p",[e._v("MyBatis的一个主要的特点就是需要程序员自己编写sql，那么如果表太多的化，难免会很麻烦，所以mybatis官方提供了一个逆向工程，可以针对单表自动生成mybatis执行所需要的代码（包括mapper.xml、mapper.java、po..）。一般在开发中，常用的逆向工程方式是通过数据库的表生成代码。")]),e._v(" "),r("h2",{attrs:{id:"使用逆向工程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用逆向工程"}},[e._v("#")]),e._v(" 使用逆向工程")]),e._v(" "),r("p",[e._v("使用Mybatis的逆向工程，需要倒入逆向工程的jar包，我是用的是mybatis-generator-maven-\nplugin-1.3.7.jar,下面开始总结Mybatis逆向工程的使用步骤。")]),e._v(" "),r("p",[r("strong",[e._v("新建一个工程")])]),e._v(" "),r("p",[e._v("我们要新建一个Java工程，这个工程专门用来使用逆向工程生成代码的。")]),e._v(" "),r("blockquote",[r("p",[r("strong",[e._v("注意")]),e._v("\n在旧的代码中直接生成也是可以的，但是由于相同路径下同名文件会直接覆盖，为了降低风险，尽量新建项目将生成的代码拷贝到自己的工程中或者将生成的代码放在某个特殊的路径下。")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://github.com/yokenuili/yokenuoli.img/blob/master/mybatis-g1.png?raw=true",alt:""}})])]),e._v(" "),r("p",[e._v("从上图看，①就是要执行的Java代码，执行它即可生成我们需要的代码；②是执行过程中新建的包，这个包都可以在④的配置文件中指定，最好是跟我们自己的项目的包命一致，后面就可以直接拷贝了，就不需要修改包名了；③就是jar包，maven项目的化就需要使用专门的一来到如语句，④是配置文件，下面会详细分析。"),r("br"),e._v("\nmaven倒入插件的语句：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("<plugin>  \n    <groupId>org.mybatis.generator</groupId>  \n    <artifactId>mybatis-generator-maven-plugin</artifactId>  \n    <version>1.3.7</version>  \n</plugin>  \n")])])]),r("p",[e._v("如需要MyBatis的逆向工程—-gengratorSqlmapCustom,可点击\n"),r("strong",[e._v("MyBatis的逆向工程—-generatorSqlmapCustom")]),e._v(" 进行下载。")]),e._v(" "),r("p",[r("strong",[e._v("配置逆向工程的配置文件")]),r("br"),e._v("\nMybatis逆向工程生成代码需要一个配置文件，名字随便起。然后MyBtais会根据这个配置文件中的配置，生成相应的代码。Mybatis-\ngenerator-core-1.3.2.jar.这个jar包里面有帮助文档，打开后里面有配置文件的模版，这里就不再赘述了，下面先把配置文件写好。")]),e._v(" "),r("p",[e._v("​"),r("br"),e._v('\n​    <?xml version=*"1.0"* encoding=*"UTF-8"*?>'),r("br"),e._v('\n​    <!DOCTYPE generatorConfiguration  \n​      PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"  \n​      "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">'),r("br"),e._v("\n​    "),r("generatorConfiguration",[r("br"),e._v("\n​        <context id="),r("em",[e._v('"testTables"')]),e._v(" targetRuntime="),r("em",[e._v('"MyBatis3"')]),e._v(">"),r("br"),e._v("\n​            "),r("commentGenerator",[r("br"),e._v("\n​                "),r("br"),e._v("\n​                <property name="),r("em",[e._v('"suppressAllComments"')]),e._v(" value="),r("em",[e._v('"true"')]),e._v(" />"),r("br"),e._v("\n​            ")]),r("br"),e._v("\n​            "),r("br"),e._v("\n​            <jdbcConnection driverClass="),r("em",[e._v('"com.mysql.jdbc.Driver"')]),r("br"),e._v("\n​                connectionURL="),r("em",[e._v('"jdbc:mysql://localhost:3306/mybatis"')]),e._v(" userId="),r("em",[e._v('"root"')]),r("br"),e._v("\n​                password="),r("em",[e._v('"yezi"')]),e._v(">"),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("javaTypeResolver",[r("br"),e._v("\n​                <property name="),r("em",[e._v('"forceBigDecimals"')]),e._v(" value="),r("em",[e._v('"false"')]),e._v(" />"),r("br"),e._v("\n​            ")]),r("br"),e._v("\n​            "),r("br"),e._v("\n​            <javaModelGenerator targetPackage="),r("em",[e._v('"com.itheima.mybatis.po"')]),r("br"),e._v("\n​                targetProject="),r("em",[e._v('".src"')]),e._v(">"),r("br"),e._v("\n​                "),r("br"),e._v("\n​                <property name="),r("em",[e._v('"enableSubPackages"')]),e._v(" value="),r("em",[e._v('"false"')]),e._v(" />"),r("br"),e._v("\n​                "),r("br"),e._v("\n​                <property name="),r("em",[e._v('"trimStrings"')]),e._v(" value="),r("em",[e._v('"true"')]),e._v(" />"),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("br"),e._v("\n​            <sqlMapGenerator targetPackage="),r("em",[e._v('"com.itheima.mybatis.mapper"')]),r("br"),e._v("\n​                targetProject="),r("em",[e._v('".src"')]),e._v(">"),r("br"),e._v("\n​                "),r("br"),e._v("\n​                <property name="),r("em",[e._v('"enableSubPackages"')]),e._v(" value="),r("em",[e._v('"false"')]),e._v(" />"),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("br"),e._v("\n​            <javaClientGenerator type="),r("em",[e._v('"XMLMAPPER"')]),r("br"),e._v("\n​                targetPackage="),r("em",[e._v('"com.itheima.mybatis.mapper"')]),r("br"),e._v("\n​                targetProject="),r("em",[e._v('".src"')]),e._v(">"),r("br"),e._v("\n​                "),r("br"),e._v("\n​                <property name="),r("em",[e._v('"enableSubPackages"')]),e._v(" value="),r("em",[e._v('"false"')]),e._v(" />"),r("br"),e._v("\n​            "),r("br"),e._v("\n​            "),r("br"),e._v("\n​            <table schema="),r("em",[e._v('""')]),e._v(" tableName="),r("em",[e._v('"user"')]),e._v(">"),r("br"),e._v("\n​            <table schema="),r("em",[e._v('""')]),e._v(" tableName="),r("em",[e._v('"orders"')]),e._v(">"),r("br"),e._v("\n​            "),r("br"),e._v("\n​        "),r("br"),e._v("\n​    ")],1)],1),e._v(" "),r("p",[e._v("从上面的配置文件中可以看出，配置文件主要做的几件事是：")]),e._v(" "),r("p",[e._v("连接数据库，这是必须的，要不然怎么根据数据库的表生成代码呢？")]),e._v(" "),r("p",[e._v("指定要生成代码的位置，要生成的代码包括po类,mapper.xml和mapper.java"),r("br"),e._v("\n指定数据库中想要生成哪些表")]),e._v(" "),r("p",[r("strong",[e._v("执行逆向工程生成代码")])]),e._v(" "),r("p",[e._v("配置文件搞好以后，然后就执行一下程序即可生成代码了，生成的Java程序，下载的逆向工程文档中都有实例，如下：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v('public class GeneratorSqlmap {  \n   public void generator() throws Exception{  \n      List<String> warnings = new ArrayList<String>();  \n      boolean overwrite = true;  \n      //指定 逆向工程配置文件  \n      File configFile = new File("generatorConfig.xml");  \n      ConfigurationParser cp = new ConfigurationParser(warnings);  \n      Configuration config = cp.parseConfiguration(configFile);  \n      DefaultShellCallback callback = new DefaultShellCallback(overwrite);  \n      MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config,  \n           callback, warnings);  \n      myBatisGenerator.generate(null);  \n   }  \n   public static void main(String[] args) throws Exception {  \n      try {  \n        GeneratorSqlmap generatorSqlmap = new GeneratorSqlmap();  \n        generatorSqlmap.generator();  \n      } catch (Exception e) {  \n        e.printStackTrace();  \n      }  \n   }  \n}  \n')])])]),r("p",[e._v("运行即可，运行完成后刷新一下工程，就可以看到最新生成的代码了。"),r("br"),e._v(" "),r("img",{attrs:{src:"https://github.com/yokenuili/yokenuoli.img/blob/master/%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81.png?raw=true",alt:""}}),r("br"),e._v("\n这里可以看出有个细节，每个po类多了一个都能关系，就是xxxExample.java,这个类是给用户自定义sql使用的，后面我会提到。到这里就生成好了，下面我们就把生成的代码拷贝到自己的工程使用。")]),e._v(" "),r("p",[e._v("##maven插件版"),r("br"),e._v(" "),r("strong",[e._v("配置文件：generatorConfig.xml")])]),e._v(" "),r("p",[e._v("​"),r("br"),e._v('\n​    <?xml version="1.0" encoding="UTF-8" ?>'),r("br"),e._v('\n​    <!DOCTYPE generatorConfiguration PUBLIC  \n​            "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"  \n​            "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd" >'),r("br"),e._v("\n​    "),r("generatorConfiguration",[r("br"),e._v("\n​    //注意:这里的配置一定要是本地mysqlj的ar文件路径. 这是指向的是我的maven仓库的地址"),r("br"),e._v("\n​        "),r("classPathEntry",{attrs:{location:"C:ToolsAndDevelopedeveloprepository_sshmysqlmysql-connector-java5.1.6mysql-connector-java-5.1.6.jar"}}),r("br"),e._v("\n​        "),r("context",{attrs:{id:"context",targetRuntime:"MyBatis3"}},[r("br"),e._v("\n​            "),r("commentGenerator",[r("br"),e._v("\n​                "),r("property",{attrs:{name:"suppressAllComments",value:"false"}}),r("br"),e._v("\n​                "),r("property",{attrs:{name:"suppressDate",value:"true"}}),r("br"),e._v("\n​            ")],1),r("br"),e._v('\n​            <jdbcConnection userId="root" password="root" driverClass="com.mysql.jdbc.Driver"'),r("br"),e._v('\n​                            connectionURL="jdbc:mysql://localhost:3306/mybatis_db"/>'),r("br"),e._v("\n​            "),r("javaTypeResolver",[r("br"),e._v("\n​                "),r("property",{attrs:{name:"forceBigDecimals",value:"false"}}),r("br"),e._v("\n​            ")],1),r("br"),e._v("\n​            "),r("javaModelGenerator",{attrs:{targetPackage:"com.lifeibai.domian",targetProject:"."}},[r("br"),e._v("\n​                "),r("property",{attrs:{name:"enableSubPackages",value:"false"}}),r("br"),e._v("\n​                "),r("property",{attrs:{name:"trimStrings",value:"true"}}),r("br"),e._v('\n​                <property name="" value=""'),r("br"),e._v("\n​            ")],1),r("br"),e._v("\n​            "),r("sqlMapGenerator",{attrs:{targetPackage:"com.lifeibai.mapper",targetProject:"."}},[r("br"),e._v("\n​                "),r("property",{attrs:{name:"enableSubPackages",value:"false"}}),r("br"),e._v("\n​            ")],1),r("br"),e._v("\n​            "),r("javaClientGenerator",{attrs:{targetPackage:"com.lifeibai.mapper",type:"XMLMAPPER",targetProject:"."}},[r("br"),e._v("\n​                "),r("property",{attrs:{name:"enableSubPackages",value:"false"}}),r("br"),e._v("\n​            ")],1),r("br"),e._v('\n​            <table schema="" tableName="user" enableCountByExample="false" enableDeleteByExample="false"'),r("br"),e._v('\n​                   enableSelectByExample="false" enableUpdateByExample="false"/>'),r("br"),e._v('\n​            <table schema="" tableName="orders" enableCountByExample="false" enableDeleteByExample="false"'),r("br"),e._v('\n​                   enableSelectByExample="false" enableUpdateByExample="false"/>'),r("br"),e._v("\n​        ")],1),r("br"),e._v("\n​    ")],1)],1),e._v(" "),r("p",[e._v("pom文件")]),e._v(" "),r("p",[e._v("​"),r("br"),e._v('\n​    <?xml version="1.0" encoding="UTF-8"?>'),r("br"),e._v('\n​    <project xmlns="http://maven.apache.org/POM/4.0.0"'),r("br"),e._v('\n​             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'),r("br"),e._v('\n​             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">'),r("br"),e._v("\n​        "),r("modelVersion",[e._v("4.0.0")]),r("br"),e._v("\n​        "),r("groupId",[e._v("com.lifeibia.mybaitis_demo_002")]),r("br"),e._v("\n​        "),r("artifactId",[e._v("mybaitis_demo_002")]),r("br"),e._v("\n​        "),r("version",[e._v("1.0-SNAPSHOT")]),r("br"),e._v("\n​        "),r("build",[r("br"),e._v("\n​            "),r("plugins",[r("br"),e._v("\n​                "),r("plugin",[r("br"),e._v("\n​                "),r("groupId",[e._v("org.mybatis.generator")]),r("br"),e._v("\n​                "),r("artifactId",[e._v("mybatis-generator-maven-plugin")]),r("br"),e._v("\n​                "),r("version",[e._v("1.3.2")]),r("br"),e._v("\n​                "),r("configuration",[r("br"),e._v("\n​                    "),r("verbose",[e._v("true")]),r("br"),e._v("\n​                    "),r("overwrite",[e._v("true")]),r("br"),e._v("\n​                ")],1),r("br"),e._v("\n​                ")],1),r("br"),e._v("\n​            ")],1),r("br"),e._v("\n​        ")],1),r("br"),e._v("\n​    ")],1),e._v(" "),r("p",[r("strong",[e._v("注意：maven项目运行插件，generatorConfig文件的子元素属性：targetProject的路径必须是/src/main/java")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v('<javaModelGenerator targetPackage="com.lifeibai.domian" targetProject="./src/main/java ">  \n            <property name="enableSubPackages" value="false"/>  \n            <property name="trimStrings" value="true"/>  \n            <property name="" value=""  \n        </javaModelGenerator>  \n        <sqlMapGenerator targetPackage="com.lifeibai.mapper" targetProject="./src/main/java.>  \n            <property name="enableSubPackages" value="false"/>  \n        </sqlMapGenerator>  \n        <javaClientGenerator targetPackage="com.lifeibai.mapper" type="XMLMAPPER" targetProject="./src/main/java">  \n            <property name="enableSubPackages" value="false"/>  \n        </javaClientGenerator>  \n')])])])])}),[],!1,null,null,null);a.default=t.exports}}]);